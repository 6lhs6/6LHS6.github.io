<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>欢迎回来！(づ￣3￣)づ╭❤～</title>
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Microsoft YaHei", Arial, sans-serif;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    :root {
      --primary: #9333ea;
      --primary-light: #f3e8ff;
      --secondary: #ec4899;
      --gray: #f3f4f6;
      --gray-dark: #1f2937;
      --gray-light: #d1d5db;
      --white: #fff;
      --shadow: 0 2px 10px rgba(147, 51, 234, 0.1);
      --radius: 8px;
      --transition: all 0.2s ease;
      --bg-gradient-start: #fdf2f8;
      --bg-gradient-end: #f5f3ff;
      --ripple-color: rgba(147, 51, 234, 0.3);
    }
    .page { display: none; min-height: 100vh; }
    .page.active { display: block; }
    body {
      background: linear-gradient(120deg, var(--bg-gradient-start), var(--bg-gradient-end)) fixed;
      color: #333;
      padding-bottom: 2rem;
      transform: translateZ(0);
    }
    .glass-container {
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.6);
    }
    .ripple-btn { position: relative; overflow: hidden; cursor: pointer; }
    .ripple {
      position: absolute;
      border-radius: 50%;
      background: var(--ripple-color);
      transform: scale(0);
      animation: ripple 0.6s linear;
      pointer-events: none;
    }
    @keyframes ripple { to { transform: scale(4); opacity: 0; } }
    .container { width: 92%; max-width: 1200px; margin: 0 auto; position: relative; z-index: 1; }
    .header {
      padding: 0.8rem 0;
      margin-bottom: 1.2rem;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: var(--shadow);
    }
    .header-content {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }
    .logo {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      text-decoration: none;
      transition: var(--transition);
    }
    .logo-img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--primary);
    }
    .logo-text {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--primary);
    }
    .nav-menu { display: flex; gap: 0.8rem; flex-wrap: wrap; }
    .nav-item {
      padding: 0.4rem 0.8rem;
      border-radius: var(--radius);
      color: #333;
      text-decoration: none;
      font-size: 0.9rem;
      transition: var(--transition);
    }
    .nav-item:hover, .nav-item.active {
      background-color: var(--primary-light);
      color: var(--primary);
    }
    .nav-toggle {
      display: none;
      background: none;
      border: none;
      font-size: 1.2rem;
      color: var(--primary);
      cursor: pointer;
    }
    .search-bar {
      flex: 1;
      max-width: 400px;
      position: relative;
    }
    .search-input {
      width: 100%;
      padding: 0.6rem 1rem 0.6rem 2.5rem;
      border: 1px solid var(--gray-light);
      border-radius: var(--radius);
      outline: none;
      font-size: 0.9rem;
      transition: var(--transition);
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }
    .search-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(147, 51, 234, 0.15);
      transform: scale(1.01);
    }
    .search-icon {
      position: absolute;
      left: 0.8rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--primary);
    }
    .btn-group { display: flex; gap: 0.6rem; }
    .btn {
      padding: 0.4rem 0.8rem;
      border-radius: var(--radius);
      border: none;
      font-size: 0.9rem;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }
    .btn-notice {
      background-color: var(--secondary);
      color: var(--white);
      --ripple-color: rgba(255, 255, 255, 0.4);
    }
    .btn-notice:hover { background-color: #db2777; transform: translateY(-2px); }
    .btn-back {
      background-color: var(--primary-light);
      color: var(--primary);
    }
    .btn-back:hover {
      background-color: var(--primary);
      color: var(--white);
    }
    .badge {
      background-color: var(--white);
      color: var(--secondary);
      font-size: 0.7rem;
      padding: 0.1rem 0.3rem;
      border-radius: 10px;
      position: relative;
      top: -2px;
      font-weight: 600;
    }
    .ad-carousel {
      width: 100%;
      height: 200px;
      margin-bottom: 1.2rem;
      border-radius: var(--radius);
      overflow: hidden;
      position: relative;
      box-shadow: var(--shadow);
      cursor: pointer;
    }
    .carousel-wrapper {
      width: 100%;
      height: 100%;
      display: flex;
      transition: transform 0.5s ease-out;
    }
    .ad-item { flex: 0 0 100%; width: 100%; height: 100%; }
    .ad-item a { display: block; width: 100%; height: 100%; }
    .ad-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      image-rendering: -webkit-optimize-contrast;
    }
    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: rgba(255,255,255,0.8);
      border: none;
      color: var(--primary);
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      z-index: 10;
    }
    .carousel-btn:hover {
      background-color: var(--white);
      box-shadow: var(--shadow);
      transform: translateY(-50%) scale(1.1);
    }
    .btn-prev { left: 10px; }
    .btn-next { right: 10px; }
    .carousel-indicators {
      position: absolute;
      bottom: 10px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 6px;
      z-index: 10;
    }
    .indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255,255,255,0.6);
      cursor: pointer;
      transition: var(--transition);
    }
    .indicator.active {
      background-color: var(--primary);
      width: 20px;
      border-radius: 4px;
    }
    .tag-filter {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.5rem;
      padding: 0.6rem 0.8rem;
      background-color: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 1.2rem;
      border: 1px solid var(--gray-light);
    }
    .filter-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--gray-dark);
      white-space: nowrap;
      line-height: 1;
    }
    .filter-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      flex: 1;
    }
    .filter-tag {
      padding: 0.25rem 0.6rem;
      border-radius: 20px;
      font-size: 0.8rem;
      background-color: var(--primary-light);
      color: var(--primary);
      cursor: pointer;
      transition: var(--transition);
      border: 1px solid transparent;
      line-height: 1.2;
    }
    .filter-tag.active {
      background-color: var(--primary);
      color: var(--white);
    }
    .sort-group { display: flex; gap: 0.4rem; white-space: nowrap; }
    .sort-btn {
      padding: 0.25rem 0.6rem;
      border-radius: 20px;
      font-size: 0.8rem;
      background-color: var(--primary-light);
      color: var(--primary);
      cursor: pointer;
      transition: var(--transition);
      border: 1px solid transparent;
      line-height: 1.2;
      display: flex;
      align-items: center;
      gap: 0.2rem;
    }
    .sort-btn.active {
      background-color: var(--primary);
      color: var(--white);
    }
    .sort-btn i { font-size: 0.7rem; }
    .url-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 0.6rem;
      margin-bottom: 1.5rem;
    }
    .url-card {
      background-color: var(--white);
      border-radius: var(--radius);
      padding: 0.5rem;
      box-shadow: var(--shadow);
      transition: var(--transition);
      border: 1px solid var(--gray-light);
    }
    .url-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(147, 51, 234, 0.15);
      border-color: var(--primary-light);
    }
    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 0.4rem;
      gap: 0.3rem;
    }
    .card-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--gray-dark);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .card-title i { color: var(--primary); font-size: 0.8rem; }
    .card-meta {
      font-size: 0.65rem;
      color: #999;
      margin-bottom: 0.3rem;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.2rem;
    }
    .card-intro {
      font-size: 0.7rem;
      color: #666;
      line-height: 1.3;
      margin-bottom: 0.4rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      height: 2.24rem;
    }
    .card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.2rem;
      margin-bottom: 0.4rem;
    }
    .tag {
      font-size: 0.6rem;
      padding: 0.1rem 0.3rem;
      background-color: var(--primary-light);
      border-radius: 4px;
      color: var(--primary);
    }
    .visit-btn {
      display: block;
      width: 100%;
      padding: 0.35rem;
      text-align: center;
      background-color: var(--primary-light);
      color: var(--primary);
      text-decoration: none;
      border-radius: var(--radius);
      font-size: 0.75rem;
      font-weight: 500;
      transition: var(--transition);
    }
    .visit-btn:hover {
      background-color: var(--primary);
      color: var(--white);
      box-shadow: 0 2px 8px rgba(147, 51, 234, 0.2);
    }
    .notice-page { padding-top: 1rem; }
    .notice-header {
      font-size: 1.5rem;
      color: var(--primary);
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--primary-light);
    }
    .notice-list-container {
      background-color: var(--white);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow);
    }
    .notice-item {
      padding: 1rem 0;
      border-bottom: 1px dashed var(--gray-light);
    }
    .notice-item:last-child { border-bottom: none; }
    .notice-date {
      font-size: 0.9rem;
      color: var(--secondary);
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .notice-text {
      font-size: 1rem;
      color: var(--gray-dark);
      line-height: 1.6;
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }
    .no-notice {
      text-align: center;
      color: #999;
      padding: 2rem 0;
      font-size: 0.8rem;
    }
    .footer {
      text-align: center;
      padding: 1.5rem 0;
      color: #999;
      font-size: 0.85rem;
      margin-top: 2rem;
    }
    @media (max-width: 768px) {
      .header-content { flex-direction: column; align-items: stretch; }
      .nav-menu {
        display: none;
        flex-direction: column;
        gap: 0.5rem;
        margin-top: 0.8rem;
        padding-top: 0.8rem;
        border-top: 1px solid var(--gray-light);
      }
      .nav-menu.active { display: flex; }
      .nav-toggle {
        display: block;
        position: absolute;
        top: 1rem;
        right: 1rem;
      }
      .search-bar { max-width: 100%; }
      .ad-carousel { height: 120px; }
      .tag-filter {
        gap: 0.15rem !important;
        padding: 0.2rem 0.3rem !important;
        margin-bottom: 0.6rem !important;
      }
      .filter-title {
        font-size: 0.7rem !important;
        margin-right: 0.1rem !important;
        line-height: 1 !important;
      }
      .filter-tags { gap: 0.2rem !important; }
      .filter-tag {
        padding: 0.12rem 0.35rem !important;
        font-size: 0.65rem !important;
        border-radius: 12px !important;
        line-height: 1.1 !important;
      }
      .sort-group { gap: 0.2rem !important; }
      .sort-btn {
        padding: 0.12rem 0.35rem !important;
        font-size: 0.65rem !important;
        border-radius: 12px !important;
        gap: 0.15rem !important;
      }
      .sort-btn i { font-size: 0.6rem !important; }
      .filter-tag:hover, .sort-btn:hover { transform: none !important; }
    }
    @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
      .glass-container { background-color: #fff; border: 1px solid #e0e0e0; }
      .url-card:hover { transform: none; box-shadow: var(--shadow); }
      body { background: #fdf2f8; }
      .ripple, @keyframes ripple { display: none !important; }
    }
  </style>
</head>
<body>
  <div class="page active" id="homePage">
    <header class="header glass-container">
      <div class="container">
        <div class="header-content">
          <a href="#" class="logo ripple-btn">
            <img src="https://jianhancloud.cn/19732846/IMG_20250820_152222.webp" alt="导航logo" class="logo-img">
            <span class="logo-text">软件资源共享库</span>
          </a>
          <button class="nav-toggle ripple-btn" id="navToggle">
            <i class="fas fa-bars"></i>
          </button>
          <nav class="nav-menu" id="homeNavMenu">
            <a href="#" class="nav-item active ripple-btn">首页</a>
            <a href="#" class="nav-item ripple-btn">暂无</a>
            <a href="#" class="nav-item ripple-btn">暂无</a>
            <a href="#" class="nav-item ripple-btn" onclick="switchPage('noticePage')">官方通知</a>
          </nav>
          <div class="search-bar">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" id="homeSearchInput" placeholder="搜索软件合集名称">
          </div>
          <div class="btn-group">
            <button class="btn btn-notice ripple-btn" onclick="switchPage('noticePage')">
              <i class="fas fa-bell"></i> 软件通知 <span class="badge" id="unreadBadge">!</span>
            </button>
          </div>
        </div>
      </div>
    </header>
    <section class="container">
      <div class="ad-carousel ripple-btn" id="adCarousel">
        <div class="carousel-wrapper" id="carouselWrapper">
          <div class="ad-item"><a href="https://pd.qq.com/s/4bl7z4gqg?b=9" target="_blank"><img src="https://jianhancloud.cn/19732846/IMG_20260202_013636.webp" alt="广告1"></a></div>
          <div class="ad-item"><a href="https://link3.cc/rjzygxs" target="_blank"><img src="https://jianhancloud.cn/19732846/IMG_20260130_164744.webp" alt="广告2"></a></div>
          <div class="ad-item"><a href="https://link3.cc/rjzygxs" target="_blank"><img src="https://jianhancloud.cn/19732846/IMG_20260130_164744.webp" alt="广告3"></a></div>
        </div>
        <button class="carousel-btn btn-prev ripple-btn" id="prevBtn"><i class="fas fa-chevron-left"></i></button>
        <button class="carousel-btn btn-next ripple-btn" id="nextBtn"><i class="fas fa-chevron-right"></i></button>
        <div class="carousel-indicators" id="carouselIndicators"></div>
      </div>
      <div class="tag-filter" id="tagFilter">
        <div class="filter-title">标签筛选：</div>
        <div class="filter-tags" id="filterTags"></div>
        <div class="sort-group">
          <div class="sort-btn ripple-btn active" data-sort="newest"><i class="fas fa-arrow-down"></i> 最��</div>
          <div class="sort-btn ripple-btn" data-sort="oldest"><i class="fas fa-arrow-up"></i> 最早</div>
        </div>
      </div>
      <div class="url-grid" id="urlGrid"></div>
    </section>
    <footer class="footer">
      <div class="container"><p>¨̮ ᴴᴬᵛᴱ ᴬ ᴳᴼᴼᴰ ᵀᴵᴹᴱ દ ᵕ̈ ૩</p></div>
    </footer>
  </div>
  <div class="page" id="noticePage">
    <header class="header glass-container">
      <div class="container">
        <div class="header-content">
          <a href="#" class="logo ripple-btn">
            <img src="https://jianhancloud.cn/19732846/IMG_20250820_152222.webp" alt="导航logo" class="logo-img">
            <span class="logo-text">软件通知栏</span>
          </a>
          <button class="nav-toggle ripple-btn" id="noticeNavToggle">
            <i class="fas fa-bars"></i>
          </button>
          <nav class="nav-menu" id="noticeNavMenu">
            <a href="#" class="nav-item ripple-btn" onclick="switchPage('homePage')">首页</a>
            <a href="#" class="nav-item ripple-btn">暂无</a>
            <a href="#" class="nav-item ripple-btn">暂无</a>
            <a href="#" class="nav-item active ripple-btn">软件通知</a>
          </nav>
          <div class="search-bar">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" id="noticeSearchInput" placeholder="搜索通知内容...">
          </div>
          <div class="btn-group">
            <button class="btn btn-back ripple-btn" onclick="switchPage('homePage')"><i class="fas fa-arrow-left"></i> 返回</button>
          </div>
        </div>
      </div>
    </header>
    <section class="container notice-page">
      <h2 class="notice-header">官方通知公告</h2>
      <div class="notice-list-container" id="noticeListContainer"></div>
    </section>
    <footer class="footer">
      <div class="container"><p>¨̮ ᴴᴬᵛᴱ ᴬ ᴳᴼᴼᴰ ᵀᴵᴹᴱ દ ᵕ̈ ૩</p></div>
    </footer>
  </div>
  <script>
    // ��增网址只需复制以下对象格式，在数组里添加即可
    const urlData = [
      {
        name: "影视软件合集",
        url: "https://rjzygxs1103{$rthSuffix}/code_20260201.html",
        tags: ["短剧", "动漫","电影","电视剧","安卓"],
        publishDate: "2026-02-02",
        version: "v1.0",
        intro: "影视软件"
      },
      {
        name: "魔法软件合集",
        url: "https://www.bilibili.com",
        tags: ["加速器", "安卓"],
        publishDate: "2026-01-02",
        version: "v1.0",
        intro: "加速器软件"
      },
      {
        name: "漫画软件合集",
        url: "https://rjzygxs1103{$rthSuffix}/code_20260202.html",
        tags: ["安卓", "漫画"],
        publishDate: "2026-02-02",
        version: "v1.0",
        intro: "漫画软件"
      },
      {
        name: "小说软件合集",
        url: "https://rjzygxs1103{$rthSuffix}/code_20260203.html",
        tags: ["安卓", "小说/阅读"],
        publishDate: "2026-02-03",
        version: "v1.0",
        intro: "小说软件"
      },
      {
        name: "音乐软件合集",
        url: "https://www.douban.com",
        tags: ["安卓", "音乐"],
        publishDate: "2026-01-05",
        version: "v1.0",
        intro: "音乐软件"
      },
      {
        name: "动漫软件合集",
        url: "https://rjzygxs1103{$rthSuffix}/code_20260131.html",
        tags: ["安卓", "动漫"],
        publishDate: "2026-02-01",
        version: "v1.0",
        intro: "热门动漫软件"
      }
    ];
    const noticeData = [
      { date: "2026-01-31", text: "如果没有找到想要的软件，请加官方QQ频道，前往“反馈和讨论板块”反馈��———书写格式： 1、软件名称 2、具体作用（例如：看漫画）3、图片（可填可不填）" },
      { date: "2026-01-06", text: "全新极简风格上线，优化体验。" },
      { date: "2026-01-04", text: "新增软件介绍功能。" },
      { date: "2026-01-02", text: "优化背景和广告轮播的渲染性能，提升加载速度" }
    ];
    let currentAdIndex = 0, adInterval = null, AD_AUTO_PLAY_INTERVAL = 3000;
    const READ_NOTICE_KEY = "read_notice_ids";
    let selectedTags = [], allTags = [], currentSort = "newest";

    // 核心方法
    function switchPage(t) {
      document.querySelectorAll('.page').forEach(e => e.classList.remove('active'));
      document.getElementById(t).classList.add('active');
      t === 'noticePage' && markAllAsRead();
      document.querySelectorAll('.nav-menu').forEach(e => e.classList.remove('active'));
      document.querySelectorAll('.nav-toggle i').forEach(e => e.className = 'fas fa-bars');
    }
    function initNavToggle(t, m) {
      document.getElementById(t).addEventListener('click', function() {
        const e = document.getElementById(m);
        e.classList.toggle('active');
        this.querySelector('i').className = e.classList.contains('active') ? 'fas fa-times' : 'fas fa-bars';
      });
    }
    function initSearch(t, d, r) {
      document.getElementById(t).addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          let f = [...d], k = this.value.trim().toLowerCase();
          selectedTags.length > 0 && (f = f.filter(i => selectedTags.every(t => i.tags.includes(t))));
          k && (f = f.filter(i => i.name.toLowerCase().includes(k) || i.tags.some(t => t.toLowerCase().includes(k)) || i.intro.toLowerCase().includes(k)));
          f.sort((a, b) => new Date(currentSort === "newest" ? b.publishDate : a.publishDate) - new Date(currentSort === "newest" ? a.publishDate : b.publishDate));
          r(f);
        }
      });
    }
    function initRippleEffect() {
      document.querySelectorAll('.ripple-btn').forEach(e => {
        e.addEventListener('click', function(t) {
          const n = document.createElement('span'), r = this.getBoundingClientRect(),
                s = Math.min(r.width, r.height), o = t.clientX - r.left - s / 2,
                i = t.clientY - r.top - s / 2;
          n.style.width = n.style.height = `${s}px`;
          n.style.left = `${o}px`;
          n.style.top = `${i}px`;
          n.classList.add('ripple');
          this.appendChild(n);
          setTimeout(() => n.remove(), 600);
        });
      });
    }
    function initCarousel() {
      const t = document.getElementById('carouselWrapper'), e = document.getElementById('carouselIndicators'),
            n = document.querySelectorAll('.ad-item').length;
      for (let i = 0; i < n; i++) {
        const r = document.createElement('div');
        r.className = `indicator ${i === 0 ? 'active' : ''}`;
        r.dataset.index = i;
        r.addEventListener('click', () => goToAd(i));
        e.appendChild(r);
      }
      document.getElementById('prevBtn').addEventListener('click', () => goToAd(currentAdIndex - 1));
      document.getElementById('nextBtn').addEventListener('click', () => goToAd(currentAdIndex + 1));
      startAutoPlay();
      document.getElementById('adCarousel').addEventListener('mouseenter', stopAutoPlay);
      document.getElementById('adCarousel').addEventListener('mouseleave', startAutoPlay);
    }
    function goToAd(t) {
      const e = document.querySelectorAll('.ad-item').length;
      currentAdIndex = t >= e ? 0 : t < 0 ? e - 1 : t;
      document.getElementById('carouselWrapper').style.transform = `translateX(-${currentAdIndex * 100}%)`;
      document.querySelectorAll('.indicator').forEach((e, n) => e.classList.toggle('active', n === currentAdIndex));
    }
    function startAutoPlay() { adInterval = setInterval(() => goToAd(currentAdIndex + 1), AD_AUTO_PLAY_INTERVAL); }
    function stopAutoPlay() { adInterval && clearInterval(adInterval); }
    function getAllTags() {
      const t = new Set();
      urlData.forEach(e => e.tags.forEach(t.add, t));
      allTags = Array.from(t).sort();
    }
    function renderFilterTags() {
      const t = document.getElementById('filterTags');
      t.innerHTML = '';
      allTags.forEach(e => {
        const n = document.createElement('div');
        n.className = `filter-tag ripple-btn ${selectedTags.includes(e) ? 'active' : ''}`;
        n.dataset.tag = e;
        n.textContent = e;
        n.addEventListener('click', () => {
          selectedTags.includes(e) ? selectedTags = selectedTags.filter(t => t !== e) : selectedTags.push(e);
          renderFilterTags();
          renderUrlCards(urlData.filter(t => selectedTags.every(n => t.tags.includes(n))).sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate)));
        });
        t.appendChild(n);
      });
    }
    function renderUrlCards(t) {
      const e = document.getElementById('urlGrid');
      if (t.length === 0) { e.innerHTML = '<div class="no-notice">暂无符合条件的软件合集</div>'; return; }
      let n = '';
      t.forEach(t => {
        n += `<div class="url-card"><div class="card-header"><h3 class="card-title"><i class="fas fa-link"></i> ${t.name}</h3></div><div class="card-meta"><span>${formatDate(t.publishDate)}</span><span>${t.version}</span></div><p class="card-intro">${t.intro}</p><div class="card-tags">${t.tags.map(e => `<span class="tag">${e}</span>`).join('')}</div><a href="${t.url}" class="visit-btn ripple-btn" target="_blank">前往查看</a></div>`;
      });
      e.innerHTML = n;
      initRippleEffect();
    }
    function renderNoticeList(t) {
      const e = document.getElementById('noticeListContainer');
      if (t.length === 0) { e.innerHTML = '<div class="no-notice">暂无通知内容</div>'; return; }
      let n = '';
      t.forEach(t => n += `<div class="notice-item"><div class="notice-date">${t.date}</div><div class="notice-text">${t.text}</div></div>`);
      e.innerHTML = n;
    }
    function checkUnreadNotice() {
      const t = JSON.parse(localStorage.getItem(READ_NOTICE_KEY) || '[]');
      const e = noticeData.some(n => !t.includes(`${n.date}-${n.text.substring(0,20)}`));
      document.getElementById('unreadBadge').style.display = e ? 'inline' : 'none';
    }
    function markAllAsRead() {
      const t = noticeData.map(e => `${e.date}-${e.text.substring(0,20)}`);
      localStorage.setItem(READ_NOTICE_KEY, JSON.stringify(t));
      checkUnreadNotice();
    }
    function formatDate(t) {
      const [e, n, r] = t.split('-');
      return `${e}/${n}/${r}`;
    }

    // 初始化
    document.addEventListener('DOMContentLoaded', function() {
      initNavToggle('navToggle', 'homeNavMenu');
      initNavToggle('noticeNavToggle', 'noticeNavMenu');
      initSearch('homeSearchInput', urlData, renderUrlCards);
      initSearch('noticeSearchInput', noticeData, renderNoticeList);
      initRippleEffect();
      
      setTimeout(() => {
        initCarousel();
        getAllTags();
        renderFilterTags();
        renderUrlCards(urlData.sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate)));
        renderNoticeList(noticeData);
        checkUnreadNotice();
        
        // 排序按钮事件
        document.querySelectorAll('.sort-btn').forEach(t => {
          t.addEventListener('click', function() {
            document.querySelectorAll('.sort-btn').forEach(e => e.classList.remove('active'));
            this.classList.add('active');
            currentSort = this.dataset.sort;
            let e = urlData.filter(e => selectedTags.every(n => e.tags.includes(n)));
            e.sort((a, b) => new Date(currentSort === "newest" ? b.publishDate : a.publishDate) - new Date(currentSort === "newest" ? a.publishDate : b.publishDate));
            renderUrlCards(e);
          });
        });
      }, 100);
    });
  </script>
</body>
</html>
